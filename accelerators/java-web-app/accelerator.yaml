accelerator:
  displayName: Modular Java Web App
  description: A sample Modular Spring Boot web application built with Tanzu supply-chain
  iconUrl: https://github.com/sample-accelerators/icons/raw/master/icon-boot.png
  tags:
  - java
  - spring
  - web
  - tanzu
  - terasky

  options:
  - name: repositoryPrefix
    inputType: text
    label: Prefix for the container image repository
    defaultValue: dev.local
    required: true
  imports:
    - name: backstage-settings
    - name: cluster-choice
    - name: java-version
    - name: tap-workload
    - name: live-update

engine:
  merge:
  - include: [ "**/*" ]
    exclude: [ "config/*.yaml", "Tiltfile", "README.md", "grype.yaml", "catalog/*.yaml", ".github/workflows/**" ]

  - include: [ "README.md" ]
    chain:
    - type: ReplaceText
      substitutions:
      - text: tanzu-java-web-app
        with: "#artifactId"
    - type: InvokeFragment
      reference: backstage-settings
    - type: InvokeFragment
      reference: cluster-choice
    - type: InvokeFragment
      reference: java-version
    - type: InvokeFragment
      reference: tap-workload
    - type: InvokeFragment
      reference: live-update
